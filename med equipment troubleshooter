streamlit run app.py
streamlit_app.py
import streamlit as st
import pandas as pd
import gspread
from oauth2client.service_account import ServiceAccountCredentials
import json

service_account_info = json.loads(st.secrets["GCP_SERVICE_ACCOUNT"])


scopes = ["https://www.googleapis.com/auth/spreadsheets", "https://www.googleapis.com/auth/drive"]


creds = Credentials.from_service_account_info(service_account_info, scopes=scopes)
client = gspread.authorize(creds)

sheet = client.open("MEDICAL_EQUIPMENT_ERRORS").sheet1

data = pd.DataFrame(sheet.get_all_records())



st.title("üîß Medical Equipment Troubleshooter")

menu = st.sidebar.selectbox("Choose Action", ["Troubleshoot", "Add New Product"])

if menu == "Troubleshoot":
    # Dropdown for Product
    product = st.selectbox("Select Product", sorted(data["Product"].unique()))

    # Filter errors for selected product
    error_options = data[data["Product"] == product]["Error Description"].unique()
    error = st.selectbox("Select Error Description", sorted(error_options))

    # Find Solution
    solution = data[(data["Product"] == product) & (data["Error Description"] == error)]["Solution"].values
    if solution:
        st.success(f"‚úÖ Solution: {solution[0]}")
    else:
        st.warning("‚ö†Ô∏è No solution found for this combination.")

elif menu == "Add New Product":
    st.subheader("‚ûï Add New Product & Error")

    # Input fields
    new_product = st.text_input("Enter Product Name")
    new_error = st.text_input("Enter Error Description")
    new_solution = st.text_area("Enter Solution")

    if st.button("Add to Database"):
        if new_product and new_error and new_solution:
            # Append to Google Sheet
            sheet.append_row([new_product, new_error, new_solution])
            st.success("‚úîÔ∏è New entry added successfully!")
        else:
            st.error("‚ùå Please fill all the fields.")
